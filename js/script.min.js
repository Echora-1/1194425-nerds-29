const contactsLink=document.querySelector(".contacts-button"),contactsClose=document.querySelector(".close"),popup=document.querySelector(".popup"),contactForm=document.querySelector(".contact-form"),contactButton=document.querySelector(".send-button"),userName=document.querySelector(".name-user"),userMail=document.querySelector(".email-user"),userMassage=document.querySelector(".message-textarea");let isStorageSupport=!0,storageName="",storageMail="";try{storageName=localStorage.getItem("name"),storageMail=localStorage.getItem("mail")}catch(e){isStorageSupport=!1}contactsLink.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("popup-hidden"),popup.classList.add("popup-show"),storageName&&storageMail?(userName.value=storageName,userMail.value=storageMail,userMassage.focus()):userName.focus(),setTimeout(function(){popup.classList.remove("popup-show")},1e3)}),contactsClose.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("popup-close"),setTimeout(function(){popup.classList.add("popup-hidden"),popup.classList.remove("popup-close"),popup.classList.remove("popup-error")},600)}),contactForm.addEventListener("submit",function(e){userName.value&&userMail.value&&userMassage.value?isStorageSupport&&(localStorage.setItem("name",userName.value),localStorage.setItem("mail",userMail.value)):(e.preventDefault(),popup.classList.remove("popup-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("popup-error"),setTimeout(function(){popup.classList.remove("popup-error")},600))}),contactButton.addEventListener("click",function(e){userName.checkValidity()&&userMail.checkValidity()||(popup.classList.remove("popup-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("popup-error"),setTimeout(function(){popup.classList.remove("popup-error")},600))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(popup.classList.contains("popup-hidden")||(e.preventDefault(),popup.classList.add("popup-close"),setTimeout(function(){popup.classList.add("popup-hidden"),popup.classList.remove("popup-close"),popup.classList.remove("popup-error")},600)))});